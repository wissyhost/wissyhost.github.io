{"title":"ElasticSearch 初级使用教程-Docker安装 (三)","slug":"2017-07-03-ElasticSearch-introductory-install-docker","date":"2017-07-02T16:00:00.000Z","updated":"2020-02-23T10:25:23.601Z","comments":true,"path":"api/articles/2017-07-03-ElasticSearch-introductory-install-docker.json","excerpt":"首先安装Docker 一般Linux发行版本中都支持Docker1<br>2<br>3<br>4<br>5<br>6<br># centos<br>yum install docker<br>#debian<br>apt-get install docker<br>#arch<br>pac-man install docker<br>讲自己添加到Docker用户组中1<br>2<br>#user1 为要添加的用户名 docker为Docker用户组 a为append G为group<br>sudo usermod -aG docker user1<br>启动Docker1<br>2<br>3<br>4<br>#新版本服务启动(centos7)<br>systemctl start docker<br>#旧版本服务启动(centos6)<br>service docker start<br>","covers":null,"content":"<link rel=\"stylesheet\" href=\"/assets/css/hint.min.css\"></link><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css\"><div class=\".article-gallery\" <h2 id=\"首先安装Docker-一般Linux发行版本中都支持Docker\"><a href=\"#首先安装Docker-一般Linux发行版本中都支持Docker\" class=\"headerlink\" title=\"首先安装Docker 一般Linux发行版本中都支持Docker\"></a>首先安装Docker 一般Linux发行版本中都支持Docker<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># centos</span></span><br><span class=\"line\">yum install docker</span><br><span class=\"line\"><span class=\"comment\">#debian</span></span><br><span class=\"line\">apt-get install docker</span><br><span class=\"line\"><span class=\"comment\">#arch</span></span><br><span class=\"line\">pac-man install docker</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"讲自己添加到Docker用户组中\"><a href=\"#讲自己添加到Docker用户组中\" class=\"headerlink\" title=\"讲自己添加到Docker用户组中\"></a>讲自己添加到Docker用户组中</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#user1 为要添加的用户名 docker为Docker用户组 a为append G为group</span></span><br><span class=\"line\">sudo usermod -aG docker user1</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"启动Docker\"><a href=\"#启动Docker\" class=\"headerlink\" title=\"启动Docker\"></a>启动Docker</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#新版本服务启动(centos7)</span></span><br><span class=\"line\">systemctl start docker</span><br><span class=\"line\"><span class=\"comment\">#旧版本服务启动(centos6)</span></span><br><span class=\"line\">service docker start</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n<h2 id=\"Docker-基本命令\"><a href=\"#Docker-基本命令\" class=\"headerlink\" title=\"Docker 基本命令\"></a>Docker 基本命令</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看Docker进程</span></span><br><span class=\"line\">docker ps</span><br><span class=\"line\"><span class=\"comment\">#查看所有的镜像文件</span></span><br><span class=\"line\">docker images</span><br><span class=\"line\"><span class=\"comment\"># 将远程的Docker镜像pull到本地（比较漫长，视时间和地区大小而定）</span></span><br><span class=\"line\">docker pull imgName</span><br><span class=\"line\"><span class=\"comment\">#前台运行一个容器</span></span><br><span class=\"line\">docker run -it imgName</span><br><span class=\"line\"><span class=\"comment\">#后台运行一个容器</span></span><br><span class=\"line\">docker run -d imgName</span><br><span class=\"line\"><span class=\"comment\">#停止一个容器</span></span><br><span class=\"line\">docker stop name|uuid</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"运行Docker-ES-local\"><a href=\"#运行Docker-ES-local\" class=\"headerlink\" title=\"运行Docker-ES local\"></a>运行Docker-ES local</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#获取镜像文件(存在则不会重复获取)</span></span><br><span class=\"line\">docker pull elasticsearch</span><br><span class=\"line\"><span class=\"comment\">#后台运行容器 容器名：elas-local 映射容器端口9200到宿主机9200端口上</span></span><br><span class=\"line\">docker run -d --name elas-local -p 9200:9200 elasticsearch</span><br><span class=\"line\"><span class=\"comment\">#停止容器</span></span><br><span class=\"line\">docker stop elas-local</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"运行Docker-ES-cluster\"><a href=\"#运行Docker-ES-cluster\" class=\"headerlink\" title=\"运行Docker-ES cluster\"></a>运行Docker-ES cluster</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#获取镜像文件(存在则不会重复获取)</span></span><br><span class=\"line\">docker pull elasticsearch</span><br><span class=\"line\"><span class=\"comment\">#启动集群模式（使用环境变量传入配置，默认集群名称为:elasticsearch）</span></span><br><span class=\"line\">docker run -d --name elas-node1 -p 9200:9200 elasticsearch  -Etransport.host=127.0.0.1 -Ediscovery.zen.minimum_master_nodes=1 </span><br><span class=\"line\">docker run -d --name elas-node2 -p 9400:9200 elasticsearch  -Etransport.host=127.0.0.1 -Ediscovery.zen.minimum_master_nodes=1 </span><br><span class=\"line\">docker run -d --name elas-node3 -p 9600:9200 elasticsearch  -Etransport.host=127.0.0.1 -Ediscovery.zen.minimum_master_nodes=1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#使用配置文件启动</span></span><br><span class=\"line\">docker run -d -v <span class=\"string\">\"<span class=\"variable\">$PWD</span>/config\"</span>:/usr/share/elasticsearch/config elasticsearch</span><br><span class=\"line\"><span class=\"comment\">#讲数据文件另存</span></span><br><span class=\"line\">docker run -d -v <span class=\"string\">\"<span class=\"variable\">$PWD</span>/esdata\"</span>:/usr/share/elasticsearch/data elasticsearch</span><br></pre></td></tr></table></figure>\n\n</div><script src=\"https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js\"></script><script>if (typeof lightGallery !== 'undefined') {\n        var options = {\n            selector: '.gallery-item'\n        };\n        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);\n        }</script>","more":"<h2 id=\"Docker-基本命令\"><a href=\"#Docker-基本命令\" class=\"headerlink\" title=\"Docker 基本命令\"></a>Docker 基本命令</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看Docker进程</span></span><br><span class=\"line\">docker ps</span><br><span class=\"line\"><span class=\"comment\">#查看所有的镜像文件</span></span><br><span class=\"line\">docker images</span><br><span class=\"line\"><span class=\"comment\"># 将远程的Docker镜像pull到本地（比较漫长，视时间和地区大小而定）</span></span><br><span class=\"line\">docker pull imgName</span><br><span class=\"line\"><span class=\"comment\">#前台运行一个容器</span></span><br><span class=\"line\">docker run -it imgName</span><br><span class=\"line\"><span class=\"comment\">#后台运行一个容器</span></span><br><span class=\"line\">docker run -d imgName</span><br><span class=\"line\"><span class=\"comment\">#停止一个容器</span></span><br><span class=\"line\">docker stop name|uuid</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"运行Docker-ES-local\"><a href=\"#运行Docker-ES-local\" class=\"headerlink\" title=\"运行Docker-ES local\"></a>运行Docker-ES local</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#获取镜像文件(存在则不会重复获取)</span></span><br><span class=\"line\">docker pull elasticsearch</span><br><span class=\"line\"><span class=\"comment\">#后台运行容器 容器名：elas-local 映射容器端口9200到宿主机9200端口上</span></span><br><span class=\"line\">docker run -d --name elas-local -p 9200:9200 elasticsearch</span><br><span class=\"line\"><span class=\"comment\">#停止容器</span></span><br><span class=\"line\">docker stop elas-local</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"运行Docker-ES-cluster\"><a href=\"#运行Docker-ES-cluster\" class=\"headerlink\" title=\"运行Docker-ES cluster\"></a>运行Docker-ES cluster</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#获取镜像文件(存在则不会重复获取)</span></span><br><span class=\"line\">docker pull elasticsearch</span><br><span class=\"line\"><span class=\"comment\">#启动集群模式（使用环境变量传入配置，默认集群名称为:elasticsearch）</span></span><br><span class=\"line\">docker run -d --name elas-node1 -p 9200:9200 elasticsearch  -Etransport.host=127.0.0.1 -Ediscovery.zen.minimum_master_nodes=1 </span><br><span class=\"line\">docker run -d --name elas-node2 -p 9400:9200 elasticsearch  -Etransport.host=127.0.0.1 -Ediscovery.zen.minimum_master_nodes=1 </span><br><span class=\"line\">docker run -d --name elas-node3 -p 9600:9200 elasticsearch  -Etransport.host=127.0.0.1 -Ediscovery.zen.minimum_master_nodes=1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#使用配置文件启动</span></span><br><span class=\"line\">docker run -d -v <span class=\"string\">\"<span class=\"variable\">$PWD</span>/config\"</span>:/usr/share/elasticsearch/config elasticsearch</span><br><span class=\"line\"><span class=\"comment\">#讲数据文件另存</span></span><br><span class=\"line\">docker run -d -v <span class=\"string\">\"<span class=\"variable\">$PWD</span>/esdata\"</span>:/usr/share/elasticsearch/data elasticsearch</span><br></pre></td></tr></table></figure>\n\n</div><script src=\"https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js\"></script><script>if (typeof lightGallery !== 'undefined') {\n        var options = {\n            selector: '.gallery-item'\n        };\n        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);\n        }</script>","categories":[{"name":"编程","path":"api/categories/编程.json"}],"tags":[{"name":"es","path":"api/tags/es.json"}]}
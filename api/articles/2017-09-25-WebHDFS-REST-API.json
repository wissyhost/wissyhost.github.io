{"title":"WebHDFS REST API","slug":"2017-09-25-WebHDFS-REST-API","date":"2017-09-25T09:15:13.000Z","updated":"2019-12-08T16:56:55.000Z","comments":false,"path":"api/articles/2017-09-25-WebHDFS-REST-API.json","excerpt":"配置说明master webhdfs端口:50070<br>dataNode webhdfs端口:70075创建文件并写入数据创建HDFS文件1<br>curl -i -X PUT \"http://masterHost:masterPort/webhdfs/v1/文件夹?op=CREATE\"<br>获取Location地址并 上传数据1<br>curl -i -X PUT \"http://dataHost:dataPort/webhdfs/v1/文件夹?op=CREATE...\"<br>","covers":null,"content":"<link rel=\"stylesheet\" href=\"/assets/css/hint.min.css\"></link><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css\"><div class=\".article-gallery\" <h3 id=\"配置说明\"><a href=\"#配置说明\" class=\"headerlink\" title=\"配置说明\"></a>配置说明<p>master webhdfs端口:50070<br>dataNode webhdfs端口:70075</p>\n<h3 id=\"创建文件并写入数据\"><a href=\"#创建文件并写入数据\" class=\"headerlink\" title=\"创建文件并写入数据\"></a>创建文件并写入数据</h3><ol>\n<li><p>创建HDFS文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -X PUT \"http://masterHost:masterPort/webhdfs/v1/文件夹?op=CREATE\"</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>获取Location地址并 上传数据</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -X PUT \"http://dataHost:dataPort/webhdfs/v1/文件夹?op=CREATE...\"</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<a id=\"more\"></a>\n<p>例如:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    wissy@wissy-PC:~$ curl -i -X PUT \"http://master:50070/webhdfs/v1/data/wissy/test?op=CREATE\"</span><br><span class=\"line\">    HTTP/1.1 307 TEMPORARY_REDIRECT</span><br><span class=\"line\">    Cache-Control: no-cache</span><br><span class=\"line\">    Expires: Mon, 25 Sep 2017 08:54:53 GMT</span><br><span class=\"line\">    Date: Mon, 25 Sep 2017 08:54:53 GMT</span><br><span class=\"line\">    Pragma: no-cache</span><br><span class=\"line\">    Expires: Mon, 25 Sep 2017 08:54:53 GMT</span><br><span class=\"line\">    Date: Mon, 25 Sep 2017 08:54:53 GMT</span><br><span class=\"line\">    Pragma: no-cache</span><br><span class=\"line\">    Content-Type: application/octet-stream</span><br><span class=\"line\">    X-FRAME-OPTIONS: SAMEORIGIN</span><br><span class=\"line\">    Location: http://node7:50075/webhdfs/v1/data/wissy/test?op=CREATE&amp;namenoderpcaddress=nameservice1&amp;overwrite=false</span><br><span class=\"line\">    Content-Length: 0</span><br><span class=\"line\">    Server: Jetty(6.1.26.cloudera.4)</span><br><span class=\"line\">wissy@wissy-PC:~$ curl -i -X PUT -T c.txt  \"http://node7:50075/webhdfs/v1/data/wissy/test?op=CREATE&amp;namenoderpcaddress=nameservice1&amp;overwrite=false\"</span><br><span class=\"line\">    HTTP/1.1 100 Continue</span><br><span class=\"line\"></span><br><span class=\"line\">    HTTP/1.1 201 Created</span><br><span class=\"line\">    Location: hdfs://nameservice1/data/wys/test</span><br><span class=\"line\">    Content-Length: 0</span><br><span class=\"line\">    Connection: close</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"追加数据\"><a href=\"#追加数据\" class=\"headerlink\" title=\"追加数据\"></a>追加数据</h3><ol>\n<li><p>创建HDFS文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -X PUT \"http://masterHost:masterPort/webhdfs/v1/文件夹?op=APPEND\"</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>获取Location地址并 上传数据</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -X PUT \"http://dataHost:dataPort/webhdfs/v1/文件夹?op=APPEND...\"</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h3 id=\"读取数据\"><a href=\"#读取数据\" class=\"headerlink\" title=\"读取数据\"></a>读取数据</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -L \"http://masterHost:masterPort/webhdfs/v1/文件夹?op=OPEN[&amp;offset=&lt;LONG&gt;][&amp;length=&lt;LONG&gt;][&amp;buffersize=&lt;INT&gt;]\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建文件夹\"><a href=\"#创建文件夹\" class=\"headerlink\" title=\"创建文件夹\"></a>创建文件夹</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -X PUT \"http://masterHost:masterPort/文件夹?op=MKDIRS[&amp;permission=&lt;OCTAL&gt;]\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"重命名文件-文件夹\"><a href=\"#重命名文件-文件夹\" class=\"headerlink\" title=\"重命名文件/文件夹\"></a>重命名文件/文件夹</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -X PUT \"http://masterHost:masterPort/webhdfs/v1/旧路径?op=RENAME&amp;destination=新路径\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除文件-文件夹\"><a href=\"#删除文件-文件夹\" class=\"headerlink\" title=\"删除文件/文件夹\"></a>删除文件/文件夹</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -X DELETE \"http://masterHost:masterPort/webhdfs/v1/路径?op=DELETE[&amp;recursive=&lt;true|false&gt;]\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看文件-文件夹状态\"><a href=\"#查看文件-文件夹状态\" class=\"headerlink\" title=\"查看文件/文件夹状态\"></a>查看文件/文件夹状态</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i  \"http://masterHost:masterPort/webhdfs/v1/路径?op=GETFILESTATUS\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"列出文件夹下面的文件\"><a href=\"#列出文件夹下面的文件\" class=\"headerlink\" title=\"列出文件夹下面的文件\"></a>列出文件夹下面的文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i  \"http://masterHost:masterPort/webhdfs/v1/路径?op=LISTSTATUS\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h3><blockquote>\n<p>[<a href=\"http://hadoop.apache.org/docs/r1.0.4/webhdfs.html]\" target=\"_blank\" rel=\"noopener\">http://hadoop.apache.org/docs/r1.0.4/webhdfs.html]</a></p>\n</blockquote>\n</div><script src=\"https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js\"></script><script>if (typeof lightGallery !== 'undefined') {\n        var options = {\n            selector: '.gallery-item'\n        };\n        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);\n        }</script>","more":"<p>例如:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    wissy@wissy-PC:~$ curl -i -X PUT \"http://master:50070/webhdfs/v1/data/wissy/test?op=CREATE\"</span><br><span class=\"line\">    HTTP/1.1 307 TEMPORARY_REDIRECT</span><br><span class=\"line\">    Cache-Control: no-cache</span><br><span class=\"line\">    Expires: Mon, 25 Sep 2017 08:54:53 GMT</span><br><span class=\"line\">    Date: Mon, 25 Sep 2017 08:54:53 GMT</span><br><span class=\"line\">    Pragma: no-cache</span><br><span class=\"line\">    Expires: Mon, 25 Sep 2017 08:54:53 GMT</span><br><span class=\"line\">    Date: Mon, 25 Sep 2017 08:54:53 GMT</span><br><span class=\"line\">    Pragma: no-cache</span><br><span class=\"line\">    Content-Type: application/octet-stream</span><br><span class=\"line\">    X-FRAME-OPTIONS: SAMEORIGIN</span><br><span class=\"line\">    Location: http://node7:50075/webhdfs/v1/data/wissy/test?op=CREATE&amp;namenoderpcaddress=nameservice1&amp;overwrite=false</span><br><span class=\"line\">    Content-Length: 0</span><br><span class=\"line\">    Server: Jetty(6.1.26.cloudera.4)</span><br><span class=\"line\">wissy@wissy-PC:~$ curl -i -X PUT -T c.txt  \"http://node7:50075/webhdfs/v1/data/wissy/test?op=CREATE&amp;namenoderpcaddress=nameservice1&amp;overwrite=false\"</span><br><span class=\"line\">    HTTP/1.1 100 Continue</span><br><span class=\"line\"></span><br><span class=\"line\">    HTTP/1.1 201 Created</span><br><span class=\"line\">    Location: hdfs://nameservice1/data/wys/test</span><br><span class=\"line\">    Content-Length: 0</span><br><span class=\"line\">    Connection: close</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"追加数据\"><a href=\"#追加数据\" class=\"headerlink\" title=\"追加数据\"></a>追加数据</h3><ol>\n<li><p>创建HDFS文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -X PUT \"http://masterHost:masterPort/webhdfs/v1/文件夹?op=APPEND\"</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>获取Location地址并 上传数据</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -X PUT \"http://dataHost:dataPort/webhdfs/v1/文件夹?op=APPEND...\"</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h3 id=\"读取数据\"><a href=\"#读取数据\" class=\"headerlink\" title=\"读取数据\"></a>读取数据</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -L \"http://masterHost:masterPort/webhdfs/v1/文件夹?op=OPEN[&amp;offset=&lt;LONG&gt;][&amp;length=&lt;LONG&gt;][&amp;buffersize=&lt;INT&gt;]\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建文件夹\"><a href=\"#创建文件夹\" class=\"headerlink\" title=\"创建文件夹\"></a>创建文件夹</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -X PUT \"http://masterHost:masterPort/文件夹?op=MKDIRS[&amp;permission=&lt;OCTAL&gt;]\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"重命名文件-文件夹\"><a href=\"#重命名文件-文件夹\" class=\"headerlink\" title=\"重命名文件/文件夹\"></a>重命名文件/文件夹</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -X PUT \"http://masterHost:masterPort/webhdfs/v1/旧路径?op=RENAME&amp;destination=新路径\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除文件-文件夹\"><a href=\"#删除文件-文件夹\" class=\"headerlink\" title=\"删除文件/文件夹\"></a>删除文件/文件夹</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i -X DELETE \"http://masterHost:masterPort/webhdfs/v1/路径?op=DELETE[&amp;recursive=&lt;true|false&gt;]\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看文件-文件夹状态\"><a href=\"#查看文件-文件夹状态\" class=\"headerlink\" title=\"查看文件/文件夹状态\"></a>查看文件/文件夹状态</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i  \"http://masterHost:masterPort/webhdfs/v1/路径?op=GETFILESTATUS\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"列出文件夹下面的文件\"><a href=\"#列出文件夹下面的文件\" class=\"headerlink\" title=\"列出文件夹下面的文件\"></a>列出文件夹下面的文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i  \"http://masterHost:masterPort/webhdfs/v1/路径?op=LISTSTATUS\"</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h3><blockquote>\n<p>[<a href=\"http://hadoop.apache.org/docs/r1.0.4/webhdfs.html]\" target=\"_blank\" rel=\"noopener\">http://hadoop.apache.org/docs/r1.0.4/webhdfs.html]</a></p>\n</blockquote>\n</div><script src=\"https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js\"></script><script>if (typeof lightGallery !== 'undefined') {\n        var options = {\n            selector: '.gallery-item'\n        };\n        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);\n        }</script>","categories":[{"name":"编程","path":"api/categories/编程.json"}],"tags":[{"name":"WebHDFS","path":"api/tags/WebHDFS.json"},{"name":"hadoop","path":"api/tags/hadoop.json"}]}
{"title":"ElasticSearch 初级使用教程-集群安装 (二)","slug":"2017-07-02-ElasticSearch-introductory-install-cluster","date":"2017-07-01T16:00:00.000Z","updated":"2019-12-08T16:56:55.000Z","comments":true,"path":"api/articles/2017-07-02-ElasticSearch-introductory-install-cluster.json","excerpt":"#ES集群模式安装下载下载elasticSearch-5.41<br>curl -L -O https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.4.1.tar.gz<br>下载elasticSearch其他格式或其他版本 <br><br>ElasticSearch修改配置文件由于作者没有多余的机器进行集群安装（不喜欢虚拟机里面操作），所以通过修改端口的形式来安装启动多个ESES有两个端口，一个是9200（rest端口），另一个是9300（内部通讯端口）node1==&gt;9200,9300(数据节点)node2==&gt;9400,9500(数据节点)node3==&gt;9600,9700(辅助选举节点，不存储索引数据)vim config/elasticsearch.yml","covers":["/static/images/2017-07-03/cluster-nodes.png"],"content":"<link rel=\"stylesheet\" href=\"/assets/css/hint.min.css\"></link><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css\"><div class=\".article-gallery\" <p>#ES集群模式安装<p></p>\n<h2 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h2><ul>\n<li><p>下载elasticSearch-5.4</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -L -O https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.4.1.tar.gz</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>下载elasticSearch其他格式或其他版本 <br><br><a href=\"https://www.elastic.co/downloads/elasticsearch\" target=\"_blank\" rel=\"noopener\">ElasticSearch</a></p>\n</li>\n</ul>\n<h2 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h2><p>由于作者没有多余的机器进行集群安装（不喜欢虚拟机里面操作），所以通过修改端口的形式来安装启动多个ES</p>\n<ul>\n<li>ES有两个端口，一个是9200（rest端口），另一个是9300（内部通讯端口）</li>\n<li>node1==&gt;9200,9300(数据节点)</li>\n<li>node2==&gt;9400,9500(数据节点)</li>\n<li>node3==&gt;9600,9700(辅助选举节点，不存储索引数据)</li>\n<li><code>vim config/elasticsearch.yml</code><a id=\"more\"></a></li>\n<li>通用配置</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 集群名称 一个网段的多个ES通过集群名称来识别，默认是elasticsearch</span></span><br><span class=\"line\">cluster.name: my-application</span><br><span class=\"line\"><span class=\"comment\">#节点名称 同一集群的节点名称不重复</span></span><br><span class=\"line\">node.name: node-1</span><br><span class=\"line\"><span class=\"comment\">#节点所在机架 可以不配置</span></span><br><span class=\"line\"><span class=\"comment\">#node.attr.rack: r1</span></span><br><span class=\"line\"><span class=\"comment\">#数据存储路径</span></span><br><span class=\"line\">path.data: /opt/soft/elasticsearch-5.4.0-9200/data</span><br><span class=\"line\"><span class=\"comment\">#日志存储路径 默认在安装路径/logs</span></span><br><span class=\"line\"><span class=\"comment\">#path.logs: /path/to/logs</span></span><br><span class=\"line\"><span class=\"comment\">#IP地址 广播地址 绑定端口地址</span></span><br><span class=\"line\">network.host: 127.0.0.1</span><br><span class=\"line\"><span class=\"comment\">#rest端口 一台机器上面唯一</span></span><br><span class=\"line\">http.port: 9200</span><br><span class=\"line\"><span class=\"comment\">#通讯端口</span></span><br><span class=\"line\">transport.tcp.port: 9300</span><br><span class=\"line\"><span class=\"comment\">#初始化节点信息 使用通讯端口，默认是9300</span></span><br><span class=\"line\"><span class=\"comment\">#discovery.zen.ping.unicast.hosts: [\"127.0.0.1:9300\",  \"127.0.0.1:9500\",\"127.0.0.1:9700\"]</span></span><br><span class=\"line\"><span class=\"comment\"># 最小选举节点数（存在选举节点无需配置）</span></span><br><span class=\"line\"><span class=\"comment\">#discovery.zen.minimum_master_nodes: 2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#指定该节点是否被选举为Master，默认是true</span></span><br><span class=\"line\">node.master: <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\">#指定该节点是否存储索引数据</span></span><br><span class=\"line\">node.data: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>node1</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cluster.name: my-application</span><br><span class=\"line\">node.name: node-1</span><br><span class=\"line\">path.data: /opt/soft/elasticsearch-5.4.0-9200/data</span><br><span class=\"line\">network.host: 127.0.0.1</span><br><span class=\"line\">http.port: 9200</span><br><span class=\"line\">transport.tcp.port: 9300</span><br><span class=\"line\">discovery.zen.ping.unicast.hosts: [<span class=\"string\">\"127.0.0.1:9300\"</span>,<span class=\"string\">\"127.0.0.1:9500\"</span>,<span class=\"string\">\"127.0.0.1:9700\"</span>]</span><br><span class=\"line\">node.master: <span class=\"literal\">true</span></span><br><span class=\"line\">node.data: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>node2</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cluster.name: my-application</span><br><span class=\"line\">node.name: node-2</span><br><span class=\"line\">path.data: /opt/soft/elasticsearch-5.4.0-9400/data</span><br><span class=\"line\">network.host: 127.0.0.1</span><br><span class=\"line\">http.port: 9400</span><br><span class=\"line\">transport.tcp.port: 9500</span><br><span class=\"line\">discovery.zen.ping.unicast.hosts: [<span class=\"string\">\"127.0.0.1:9300\"</span>,<span class=\"string\">\"127.0.0.1:9500\"</span>,<span class=\"string\">\"127.0.0.1:9700\"</span>]</span><br><span class=\"line\">node.master: <span class=\"literal\">true</span></span><br><span class=\"line\">node.data: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>node3</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cluster.name: my-application</span><br><span class=\"line\">node.name: node-3</span><br><span class=\"line\">path.data: /opt/soft/elasticsearch-5.4.0-9600/data</span><br><span class=\"line\">network.host: 127.0.0.1</span><br><span class=\"line\">http.port: 9600</span><br><span class=\"line\">transport.tcp.port: 9700</span><br><span class=\"line\">discovery.zen.ping.unicast.hosts: [<span class=\"string\">\"127.0.0.1:9300\"</span>,<span class=\"string\">\"127.0.0.1:9500\"</span>,<span class=\"string\">\"127.0.0.1:9700\"</span>]</span><br><span class=\"line\">node.master: <span class=\"literal\">true</span></span><br><span class=\"line\">node.data: <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>打开浏览器输入<code>http://127.0.0.1:9200/_nodes</code><br><a href=\"/static/images/2017-07-03/cluster-nodes.png\" title=\"ESnodes\" class=\"gallery-item\"><img src=\"/static/images/2017-07-03/cluster-nodes.png\" alt=\"ESnodes\"></a></li>\n</ul>\n</div><script src=\"https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js\"></script><script>if (typeof lightGallery !== 'undefined') {\n        var options = {\n            selector: '.gallery-item'\n        };\n        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);\n        }</script>","more":"</li>\n<li>通用配置</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 集群名称 一个网段的多个ES通过集群名称来识别，默认是elasticsearch</span></span><br><span class=\"line\">cluster.name: my-application</span><br><span class=\"line\"><span class=\"comment\">#节点名称 同一集群的节点名称不重复</span></span><br><span class=\"line\">node.name: node-1</span><br><span class=\"line\"><span class=\"comment\">#节点所在机架 可以不配置</span></span><br><span class=\"line\"><span class=\"comment\">#node.attr.rack: r1</span></span><br><span class=\"line\"><span class=\"comment\">#数据存储路径</span></span><br><span class=\"line\">path.data: /opt/soft/elasticsearch-5.4.0-9200/data</span><br><span class=\"line\"><span class=\"comment\">#日志存储路径 默认在安装路径/logs</span></span><br><span class=\"line\"><span class=\"comment\">#path.logs: /path/to/logs</span></span><br><span class=\"line\"><span class=\"comment\">#IP地址 广播地址 绑定端口地址</span></span><br><span class=\"line\">network.host: 127.0.0.1</span><br><span class=\"line\"><span class=\"comment\">#rest端口 一台机器上面唯一</span></span><br><span class=\"line\">http.port: 9200</span><br><span class=\"line\"><span class=\"comment\">#通讯端口</span></span><br><span class=\"line\">transport.tcp.port: 9300</span><br><span class=\"line\"><span class=\"comment\">#初始化节点信息 使用通讯端口，默认是9300</span></span><br><span class=\"line\"><span class=\"comment\">#discovery.zen.ping.unicast.hosts: [\"127.0.0.1:9300\",  \"127.0.0.1:9500\",\"127.0.0.1:9700\"]</span></span><br><span class=\"line\"><span class=\"comment\"># 最小选举节点数（存在选举节点无需配置）</span></span><br><span class=\"line\"><span class=\"comment\">#discovery.zen.minimum_master_nodes: 2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#指定该节点是否被选举为Master，默认是true</span></span><br><span class=\"line\">node.master: <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\">#指定该节点是否存储索引数据</span></span><br><span class=\"line\">node.data: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>node1</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cluster.name: my-application</span><br><span class=\"line\">node.name: node-1</span><br><span class=\"line\">path.data: /opt/soft/elasticsearch-5.4.0-9200/data</span><br><span class=\"line\">network.host: 127.0.0.1</span><br><span class=\"line\">http.port: 9200</span><br><span class=\"line\">transport.tcp.port: 9300</span><br><span class=\"line\">discovery.zen.ping.unicast.hosts: [<span class=\"string\">\"127.0.0.1:9300\"</span>,<span class=\"string\">\"127.0.0.1:9500\"</span>,<span class=\"string\">\"127.0.0.1:9700\"</span>]</span><br><span class=\"line\">node.master: <span class=\"literal\">true</span></span><br><span class=\"line\">node.data: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>node2</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cluster.name: my-application</span><br><span class=\"line\">node.name: node-2</span><br><span class=\"line\">path.data: /opt/soft/elasticsearch-5.4.0-9400/data</span><br><span class=\"line\">network.host: 127.0.0.1</span><br><span class=\"line\">http.port: 9400</span><br><span class=\"line\">transport.tcp.port: 9500</span><br><span class=\"line\">discovery.zen.ping.unicast.hosts: [<span class=\"string\">\"127.0.0.1:9300\"</span>,<span class=\"string\">\"127.0.0.1:9500\"</span>,<span class=\"string\">\"127.0.0.1:9700\"</span>]</span><br><span class=\"line\">node.master: <span class=\"literal\">true</span></span><br><span class=\"line\">node.data: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>node3</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cluster.name: my-application</span><br><span class=\"line\">node.name: node-3</span><br><span class=\"line\">path.data: /opt/soft/elasticsearch-5.4.0-9600/data</span><br><span class=\"line\">network.host: 127.0.0.1</span><br><span class=\"line\">http.port: 9600</span><br><span class=\"line\">transport.tcp.port: 9700</span><br><span class=\"line\">discovery.zen.ping.unicast.hosts: [<span class=\"string\">\"127.0.0.1:9300\"</span>,<span class=\"string\">\"127.0.0.1:9500\"</span>,<span class=\"string\">\"127.0.0.1:9700\"</span>]</span><br><span class=\"line\">node.master: <span class=\"literal\">true</span></span><br><span class=\"line\">node.data: <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>打开浏览器输入<code>http://127.0.0.1:9200/_nodes</code><br><a href=\"/static/images/2017-07-03/cluster-nodes.png\" title=\"ESnodes\" class=\"gallery-item\"><img src=\"/static/images/2017-07-03/cluster-nodes.png\" alt=\"ESnodes\"></a></li>\n</ul>\n</div><script src=\"https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js\"></script><script>if (typeof lightGallery !== 'undefined') {\n        var options = {\n            selector: '.gallery-item'\n        };\n        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);\n        }</script>","categories":[{"name":"编程","path":"api/categories/编程.json"}],"tags":[{"name":"es","path":"api/tags/es.json"}]}
{"title":"使用Hive正确导出csv的姿势","slug":"2018-04-02-hive-export-csv","date":"2018-04-02T13:17:56.000Z","updated":"2019-12-08T16:56:55.000Z","comments":false,"path":"api/articles/2018-04-02-hive-export-csv.json","excerpt":null,"covers":null,"content":"<link rel=\"stylesheet\" href=\"/assets/css/hint.min.css\"></link><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css\"><link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css\"><div class=\".article-gallery\" <h3 id=\"使用Hive导出csv\"><a href=\"#使用Hive导出csv\" class=\"headerlink\" title=\"使用Hive导出csv\"></a>使用Hive导出csv<p>大家在导出csv后，使用Excel大家文件的时候，会遇到这样的问题，文件的存在少量串行的数据，虽然不影响整体数据，但是有的时候遇到高精度计算的过程中，还是难免有些尴尬😅</p>\n<ol>\n<li>导出的时候进行转义</li>\n<li>导出的时候使用其他格式，在Excel中使用 数据-&gt;文件-&gt;自文本导入 使用自定义格式导入</li>\n<li>使用Hive序列化导入,会自动规整格式<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span>  wys.wys_output</span><br><span class=\"line\"><span class=\"keyword\">ROW</span> <span class=\"keyword\">FORMAT</span> SERDE <span class=\"string\">'org.apache.hadoop.hive.serde2.OpenCSVSerde'</span></span><br><span class=\"line\"><span class=\"keyword\">WITH</span> SERDEPROPERTIES (</span><br><span class=\"line\"><span class=\"string\">\"separatorChar\"</span> = <span class=\"string\">\",\"</span>,</span><br><span class=\"line\"><span class=\"string\">\"quoteChar\"</span>  = <span class=\"string\">\"\\\"\"</span>,</span><br><span class=\"line\"><span class=\"string\">\"escapeChar\"</span>  = <span class=\"string\">\"\\\"\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"keyword\">STORED</span> <span class=\"keyword\">AS</span> TEXTFILE</span><br><span class=\"line\"><span class=\"keyword\">as</span>   <span class=\"keyword\">select</span></span><br><span class=\"line\">  <span class=\"keyword\">distinct</span></span><br><span class=\"line\">  a,</span><br><span class=\"line\">  b</span><br><span class=\"line\">  <span class=\"keyword\">from</span> xxx;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<p>Excel中csv格式中会出现\\n 使用rtrim和ltrim可以去除,每一列数据都是以<code>&quot;</code>分割数据,但是在数据出现<code>&quot;</code>号的话就会导致数据串行,此时我们可以使用<code>&quot;&quot;</code>来代表那是数据中双引号</p>\n</div><script src=\"https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js\"></script><script>if (typeof lightGallery !== 'undefined') {\n        var options = {\n            selector: '.gallery-item'\n        };\n        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);\n        }</script>","more":"<link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css\"><div class=\".article-gallery\" <h3 id=\"使用Hive导出csv\"><a href=\"#使用Hive导出csv\" class=\"headerlink\" title=\"使用Hive导出csv\"></a>使用Hive导出csv<p>大家在导出csv后，使用Excel大家文件的时候，会遇到这样的问题，文件的存在少量串行的数据，虽然不影响整体数据，但是有的时候遇到高精度计算的过程中，还是难免有些尴尬😅</p>\n<ol>\n<li>导出的时候进行转义</li>\n<li>导出的时候使用其他格式，在Excel中使用 数据-&gt;文件-&gt;自文本导入 使用自定义格式导入</li>\n<li>使用Hive序列化导入,会自动规整格式<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span>  wys.wys_output</span><br><span class=\"line\"><span class=\"keyword\">ROW</span> <span class=\"keyword\">FORMAT</span> SERDE <span class=\"string\">'org.apache.hadoop.hive.serde2.OpenCSVSerde'</span></span><br><span class=\"line\"><span class=\"keyword\">WITH</span> SERDEPROPERTIES (</span><br><span class=\"line\"><span class=\"string\">\"separatorChar\"</span> = <span class=\"string\">\",\"</span>,</span><br><span class=\"line\"><span class=\"string\">\"quoteChar\"</span>  = <span class=\"string\">\"\\\"\"</span>,</span><br><span class=\"line\"><span class=\"string\">\"escapeChar\"</span>  = <span class=\"string\">\"\\\"\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"keyword\">STORED</span> <span class=\"keyword\">AS</span> TEXTFILE</span><br><span class=\"line\"><span class=\"keyword\">as</span>   <span class=\"keyword\">select</span></span><br><span class=\"line\">  <span class=\"keyword\">distinct</span></span><br><span class=\"line\">  a,</span><br><span class=\"line\">  b</span><br><span class=\"line\">  <span class=\"keyword\">from</span> xxx;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<p>Excel中csv格式中会出现\\n 使用rtrim和ltrim可以去除,每一列数据都是以<code>&quot;</code>分割数据,但是在数据出现<code>&quot;</code>号的话就会导致数据串行,此时我们可以使用<code>&quot;&quot;</code>来代表那是数据中双引号</p>\n</div><script src=\"https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js\"></script><script>if (typeof lightGallery !== 'undefined') {\n        var options = {\n            selector: '.gallery-item'\n        };\n        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);\n        }</script>","categories":[{"name":"Hive","path":"api/categories/Hive.json"},{"name":"大数据","path":"api/categories/大数据.json"}],"tags":[{"name":"hive,BigData,csv","path":"api/tags/hive,BigData,csv.json"}]}